<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç | RustMe Client</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
    <script src="/db-config.js" defer></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="logo-icon">ü¶Ä</span>
                <span class="logo-text">RustMe Client</span>
            </div>
            <div class="nav-menu">
                <a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/#mods" class="nav-link">–ú–æ–¥—ã</a>
                <a href="/#functions" class="nav-link">–§—É–Ω–∫—Ü–∏–∏</a>
                <a href="/admin/" class="nav-link">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
                <a href="/account/" class="nav-link active">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
            </div>
            <button class="btn-login" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
            </button>
        </div>
    </nav>

    <div class="account-container">
        <div class="account-sidebar">
            <div class="sidebar-user" id="sidebarUser">
                <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="sidebar-link active" data-tab="overview">
                    <i class="fas fa-home"></i> –û–±–∑–æ—Ä
                </a>
                <a href="#" class="sidebar-link" data-tab="subscription">
                    <i class="fas fa-crown"></i> –ü–æ–¥–ø–∏—Å–∫–∞
                </a>
                <a href="#" class="sidebar-link" data-tab="keys">
                    <i class="fas fa-key"></i> –ú–æ–∏ –∫–ª—é—á–∏
                </a>
                <a href="#" class="sidebar-link" data-tab="stats">
                    <i class="fas fa-chart-line"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                </a>
                <a href="#" class="sidebar-link" data-tab="settings">
                    <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </a>
                <a href="#" class="sidebar-link" data-tab="support">
                    <i class="fas fa-headset"></i> –ü–æ–¥–¥–µ—Ä–∂–∫–∞
                </a>
            </nav>
        </div>

        <div class="account-content">
            <!-- –í–∫–ª–∞–¥–∫–∞: –û–±–∑–æ—Ä -->
            <div class="account-tab active" id="overviewTab">
                <div class="tab-header">
                    <h2>–û–±–∑–æ—Ä –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
                    <p id="welcomeMessage">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
                
                <div class="overview-grid">
                    <div class="overview-card">
                        <div class="overview-icon" style="background: rgba(37, 99, 235, 0.1); color: #2563eb;">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="overview-info">
                            <div class="overview-label">–¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞</div>
                            <div class="overview-value" id="currentSub">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <div class="overview-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="overview-info">
                            <div class="overview-label">–ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ –¥–æ</div>
                            <div class="overview-value" id="subExpires">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <div class="overview-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                            <i class="fas fa-key"></i>
                        </div>
                        <div class="overview-info">
                            <div class="overview-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–µ–π</div>
                            <div class="overview-value" id="activeKeys">0</div>
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <div class="overview-icon" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="overview-info">
                            <div class="overview-label">–í—Ä–µ–º—è –≤ –∏–≥—Ä–µ</div>
                            <div class="overview-value" id="playTime">0—á 0–º</div>
                        </div>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <div class="actions-grid">
                        <button class="action-btn" id="renewSubBtn">
                            <i class="fas fa-sync-alt"></i>
                            <span>–ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</span>
                        </button>
                        <button class="action-btn" id="downloadClientBtn">
                            <i class="fas fa-download"></i>
                            <span>–°–∫–∞—á–∞—Ç—å –∫–ª–∏–µ–Ω—Ç</span>
                        </button>
                        <button class="action-btn" id="getSupportBtn">
                            <i class="fas fa-headset"></i>
                            <span>–ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</span>
                        </button>
                        <button class="action-btn" id="inviteFriendBtn">
                            <i class="fas fa-user-plus"></i>
                            <span>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</span>
                        </button>
                    </div>
                </div>
                
                <div class="recent-activity">
                    <h3>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                    <div class="activity-list" id="activityList">
                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-sign-in-alt"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</div>
                                <div class="activity-time" id="lastLoginTime">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ü–æ–¥–ø–∏—Å–∫–∞ -->
            <div class="account-tab" id="subscriptionTab">
                <div class="tab-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π</h2>
                    <p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–π —Ç–µ–∫—É—â–µ–π –ø–æ–¥–ø–∏—Å–∫–µ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø—Ü–∏—è—Ö</p>
                </div>
                
                <div class="subscription-info-card">
                    <div class="subscription-header">
                        <div class="sub-icon">üëë</div>
                        <div>
                            <h3 id="subType">RustMe Full</h3>
                            <div class="sub-status" id="subStatus">–ê–∫—Ç–∏–≤–Ω–∞</div>
                        </div>
                    </div>
                    
                    <div class="subscription-details">
                        <div class="detail-item">
                            <div class="detail-label">–î–∞—Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:</div>
                            <div class="detail-value" id="subStartDate">01.01.2024</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:</div>
                            <div class="detail-value" id="subEndDate">01.02.2024</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">–û—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π:</div>
                            <div class="detail-value" id="subDaysLeft">30</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">–°—Ç–æ–∏–º–æ—Å—Ç—å:</div>
                            <div class="detail-value" id="subPrice">$199</div>
                        </div>
                    </div>
                    
                    <div class="subscription-features">
                        <h4>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:</h4>
                        <div class="features-grid" id="subFeatures">
                            <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </div>
                    </div>
                    
                    <div class="subscription-actions">
                        <button class="btn-primary" id="upgradeSubBtn">
                            <i class="fas fa-arrow-up"></i> –£–ª—É—á—à–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
                        </button>
                        <button class="btn-secondary" id="cancelSubBtn">
                            <i class="fas fa-ban"></i> –û—Ç–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
                        </button>
                    </div>
                </div>
                
                <div class="available-plans">
                    <h3>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã</h3>
                    <div class="plans-grid">
                        <div class="plan-card">
                            <div class="plan-header">
                                <h4>RustMe Basic</h4>
                                <div class="plan-price">$99 <span>/–º–µ—Å—è—Ü</span></div>
                            </div>
                            <ul class="plan-features">
                                <li><i class="fas fa-check"></i> ESP –∏ –†–∞–¥–∞—Ä</li>
                                <li><i class="fas fa-check"></i> –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª—É—Ç–∞</li>
                                <li><i class="fas fa-times"></i> Aimbot</li>
                                <li><i class="fas fa-times"></i> No Recoil</li>
                            </ul>
                            <button class="btn-plan" data-plan="basic">–í—ã–±—Ä–∞—Ç—å</button>
                        </div>
                        
                        <div class="plan-card featured">
                            <div class="plan-badge">–ü–û–ü–£–õ–Ø–†–ù–û</div>
                            <div class="plan-header">
                                <h4>RustMe Full</h4>
                                <div class="plan-price">$199 <span>/–º–µ—Å—è—Ü</span></div>
                            </div>
                            <ul class="plan-features">
                                <li><i class="fas fa-check"></i> –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Basic</li>
                                <li><i class="fas fa-check"></i> –£–º–Ω—ã–π Aimbot</li>
                                <li><i class="fas fa-check"></i> No Recoil & Spread</li>
                                <li><i class="fas fa-check"></i> –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</li>
                            </ul>
                            <button class="btn-plan featured" data-plan="full">–í—ã–±—Ä–∞—Ç—å</button>
                        </div>
                        
                        <div class="plan-card">
                            <div class="plan-header">
                                <h4>RustMe Forever</h4>
                                <div class="plan-price">$499 <span>–µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ</span></div>
                            </div>
                            <ul class="plan-features">
                                <li><i class="fas fa-check"></i> –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Full</li>
                                <li><i class="fas fa-check"></i> –ü–æ–∂–∏–∑–Ω–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø</li>
                                <li><i class="fas fa-check"></i> –í—Å–µ –±—É–¥—É—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</li>
                                <li><i class="fas fa-check"></i> VIP —Å—Ç–∞—Ç—É—Å</li>
                            </ul>
                            <button class="btn-plan" data-plan="forever">–í—ã–±—Ä–∞—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ú–æ–∏ –∫–ª—é—á–∏ -->
            <div class="account-tab" id="keysTab">
                <div class="tab-header">
                    <h2>–ú–æ–∏ –∫–ª—é—á–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</h2>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª–∏–µ–Ω—Ç—É</p>
                </div>
                
                <div class="keys-container">
                    <div class="keys-actions">
                        <button class="btn-primary" id="generateKeyBtn">
                            <i class="fas fa-plus"></i> –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á
                        </button>
                        <button class="btn-secondary" id="importKeyBtn">
                            <i class="fas fa-file-import"></i> –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á
                        </button>
                    </div>
                    
                    <div class="keys-list" id="keysList">
                        <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </div>
                    
                    <div class="keys-info">
                        <div class="info-icon">‚ÑπÔ∏è</div>
                        <div class="info-content">
                            <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª—é—á–∞—Ö</h4>
                            <p>‚Ä¢ –ö–∞–∂–¥—ã–π –∫–ª—é—á –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ</p>
                            <p>‚Ä¢ –ü—Ä–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—Ç –∂–µ –∫–ª—é—á</p>
                            <p>‚Ä¢ –ö–ª—é—á–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="account-tab" id="statsTab">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div class="account-tab" id="settingsTab">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ -->
            <div class="account-tab" id="supportTab">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ -->
            </div>
        </div>
    </div>

    <script>
    class AccountManager {
        constructor() {
            this.currentUser = null;
            this.userData = null;
            this.init();
        }

        async init() {
            await this.checkAuth();
            this.loadUserData();
            this.bindEvents();
        }

        async checkAuth() {
            const session = localStorage.getItem('rustme_session');
            if (!session) {
                window.location.href = '/';
                return;
            }

            try {
                const sessionData = JSON.parse(atob(session));
                if (Date.now() > sessionData.expires) {
                    localStorage.removeItem('rustme_session');
                    window.location.href = '/';
                    return;
                }

                this.currentUser = sessionData.user;
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
                const data = await window.db.fetchData();
                this.userData = data.users.find(u => u.id === this.currentUser.id);
                
                if (!this.userData) {
                    this.logout();
                    return;
                }

                this.updateUI();
                
            } catch (error) {
                console.error('Auth error:', error);
                this.logout();
            }
        }

        updateUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Å–∞–π–¥–±–∞—Ä–µ
            const roleData = this.getRoleData(this.userData.role);
            document.getElementById('sidebarUser').innerHTML = `
                <div class="user-avatar" style="background: ${roleData.color}">
                    ${roleData.emoji}
                </div>
                <div class="user-info">
                    <div class="user-name">${this.userData.username}</div>
                    <div class="user-role" style="color: ${roleData.color}">
                        ${roleData.emoji} ${this.userData.role}
                    </div>
                </div>
            `;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∫–ª–∞–¥–∫—É –æ–±–∑–æ—Ä–∞
            this.updateOverview();
        }

        getRoleData(role) {
            const roles = {
                'DEVELOPER': { emoji: 'üëë', color: '#FFD700' },
                'OVERSEER': { emoji: 'üî±', color: '#FF6B6B' },
                'ALPHA': { emoji: '‚ö°', color: '#4ECDC4' },
                'MODER': { emoji: 'üõ°Ô∏è', color: '#45B7D1' },
                'FULL': { emoji: 'üíé', color: '#96CEB4' },
                'LEGIT': { emoji: 'üé≠', color: '#FECA57' },
                'BASIC': { emoji: 'üîì', color: '#54A0FF' },
                'LITE': { emoji: '‚ö°', color: '#5F27CD' },
                'TESTER': { emoji: 'üß™', color: '#00D2D3' },
                'USER': { emoji: 'üë§', color: '#C8D6E5' }
            };
            return roles[role] || roles.USER;
        }

        updateOverview() {
            // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const hour = new Date().getHours();
            let greeting = '–î–æ–±—Ä–æ–π –Ω–æ—á–∏';
            if (hour >= 6 && hour < 12) greeting = '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ';
            else if (hour >= 12 && hour < 18) greeting = '–î–æ–±—Ä—ã–π –¥–µ–Ω—å';
            else if (hour >= 18 && hour < 23) greeting = '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä';
            
            document.getElementById('welcomeMessage').textContent = 
                `${greeting}, ${this.userData.username}!`;

            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ
            document.getElementById('currentSub').textContent = 
                this.userData.subscription === 'forever' ? '–ù–∞–≤—Å–µ–≥–¥–∞' : 
                this.userData.subscription ? this.userData.subscription.charAt(0).toUpperCase() + 
                this.userData.subscription.slice(1) : '–ù–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏';

            // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
            const created = new Date(this.userData.createdAt);
            let expires = new Date(created);
            
            switch(this.userData.subscription) {
                case 'month':
                    expires.setMonth(expires.getMonth() + 1);
                    break;
                case '3month':
                    expires.setMonth(expires.getMonth() + 3);
                    break;
                case 'year':
                    expires.setFullYear(expires.getFullYear() + 1);
                    break;
                case 'forever':
                    expires = new Date('2099-12-31');
                    break;
                default:
                    expires = '–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ';
            }
            
            document.getElementById('subExpires').textContent = 
                expires instanceof Date ? expires.toLocaleDateString('ru-RU') : expires;

            // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞
            if (this.userData.lastLogin) {
                const lastLogin = new Date(this.userData.lastLogin);
                document.getElementById('lastLoginTime').textContent = 
                    lastLogin.toLocaleString('ru-RU');
            }
        }

        bindEvents() {
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤–∫–ª–∞–¥–∫–∞–º
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tab = link.dataset.tab;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                    document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    
                    document.querySelectorAll('.account-tab').forEach(t => t.classList.remove('active'));
                    document.getElementById(`${tab}Tab`).classList.add('active');
                });
            });

            // –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
            document.getElementById('renewSubBtn')?.addEventListener('click', () => {
                window.open('https://t.me/dadepbabki', '_blank');
            });

            document.getElementById('downloadClientBtn')?.addEventListener('click', () => {
                if (this.userData.subscription && this.userData.subscription !== 'none') {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
                    alert('–ö–ª–∏–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤ Telegram –∫–∞–Ω–∞–ª–µ');
                    window.open('https://t.me/dadepbabki', '_blank');
                } else {
                    alert('–î–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞');
                }
            });

            document.getElementById('getSupportBtn')?.addEventListener('click', () => {
                window.open('https://t.me/dadepbabki', '_blank');
            });

            document.getElementById('inviteFriendBtn')?.addEventListener('click', () => {
                const inviteCode = `RUSTME-${this.userData.id}-INVITE`;
                navigator.clipboard.writeText(inviteCode);
                alert(`–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è ${inviteCode} —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –î—Ä—É–≥ –ø–æ–ª—É—á–∏—Ç 10% —Å–∫–∏–¥–∫—É.`);
            });

            // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
            document.getElementById('logoutBtn').addEventListener('click', () => {
                this.logout();
            });
        }

        logout() {
            localStorage.removeItem('rustme_session');
            window.location.href = '/';
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', async () => {
        // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        if (!window.db) {
            const script = document.createElement('script');
            script.src = '/db-config.js';
            script.onload = () => new AccountManager();
            document.head.appendChild(script);
        } else {
            new AccountManager();
        }
    });
    </script>

    <style>
    .account-container {
        display: flex;
        min-height: calc(100vh - 80px);
        margin-top: 80px;
    }

    .account-sidebar {
        width: 280px;
        background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
        border-right: 1px solid rgba(255, 255, 255, 0.1);
        padding: 2rem 1rem;
        position: fixed;
        height: calc(100vh - 80px);
        overflow-y: auto;
    }

    .sidebar-user {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1rem;
        margin-bottom: 2rem;
    }

    .user-avatar {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        flex-shrink: 0;
    }

    .user-info {
        flex: 1;
        min-width: 0;
    }

    .user-name {
        font-weight: 600;
        font-size: 1.1rem;
        margin-bottom: 0.25rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .user-role {
        font-size: 0.875rem;
        font-weight: 500;
    }

    .sidebar-nav {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .sidebar-link {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        color: var(--gray);
        text-decoration: none;
        border-radius: 0.75rem;
        transition: all 0.3s ease;
    }

    .sidebar-link:hover,
    .sidebar-link.active {
        background: var(--gradient-primary);
        color: white;
    }

    .sidebar-link i {
        width: 20px;
        text-align: center;
    }

    .account-content {
        flex: 1;
        margin-left: 280px;
        padding: 2rem;
        background: var(--darker);
        min-height: calc(100vh - 80px);
    }

    .account-tab {
        display: none;
        animation: fadeIn 0.3s ease;
    }

    .account-tab.active {
        display: block;
    }

    .tab-header {
        margin-bottom: 2rem;
    }

    .tab-header h2 {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .tab-header p {
        color: var(--gray);
        font-size: 1.125rem;
    }

    .overview-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
    }

    .overview-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 1.5rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        transition: all 0.3s ease;
    }

    .overview-card:hover {
        transform: translateY(-3px);
        border-color: var(--primary);
        background: rgba(255, 255, 255, 0.08);
    }

    .overview-icon {
        width: 60px;
        height: 60px;
        border-radius: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        flex-shrink: 0;
    }

    .overview-info {
        flex: 1;
    }

    .overview-label {
        font-size: 0.875rem;
        color: var(--gray);
        margin-bottom: 0.25rem;
    }

    .overview-value {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--light);
    }

    .quick-actions {
        margin-bottom: 3rem;
    }

    .quick-actions h3 {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
    }

    .action-btn {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 1.5rem;
        color: var(--light);
        display: flex;
        align-items: center;
        gap: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .action-btn:hover {
        background: var(--gradient-primary);
        border-color: var(--primary);
        transform: translateY(-2px);
    }

    .action-btn i {
        font-size: 1.25rem;
    }

    .action-btn span {
        font-weight: 500;
        font-size: 1rem;
    }

    .recent-activity {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1rem;
        padding: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .recent-activity h3 {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .activity-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .activity-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 0.75rem;
    }

    .activity-icon {
        width: 40px;
        height: 40px;
        background: var(--gradient-primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
    }

    .activity-content {
        flex: 1;
    }

    .activity-title {
        font-weight: 500;
        margin-bottom: 0.25rem;
    }

    .activity-time {
        font-size: 0.875rem;
        color: var(--gray);
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö –≤–∫–ª–∞–¥–æ–∫ */
    .subscription-info-card {
        background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(124, 58, 237, 0.1));
        border-radius: 1.5rem;
        padding: 2rem;
        margin-bottom: 3rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .subscription-header {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .sub-icon {
        font-size: 3rem;
    }

    .subscription-header h3 {
        font-size: 1.75rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .sub-status {
        display: inline-block;
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
        padding: 0.25rem 1rem;
        border-radius: 2rem;
        font-size: 0.875rem;
        font-weight: 600;
    }

    .subscription-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
        padding-bottom: 2rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .detail-item {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .detail-label {
        font-size: 0.875rem;
        color: var(--gray);
    }

    .detail-value {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--light);
    }

    .subscription-features {
        margin-bottom: 2rem;
    }

    .subscription-features h4 {
        font-size: 1.25rem;
        margin-bottom: 1rem;
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
    }

    .subscription-actions {
        display: flex;
        gap: 1rem;
    }

    .available-plans {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1.5rem;
        padding: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .available-plans h3 {
        font-size: 1.5rem;
        margin-bottom: 2rem;
    }

    .plans-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
    }

    .plan-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 2rem;
        position: relative;
        transition: all 0.3s ease;
    }

    .plan-card:hover {
        transform: translateY(-5px);
        border-color: var(--primary);
    }

    .plan-card.featured {
        background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(124, 58, 237, 0.1));
        border: 2px solid var(--primary);
    }

    .plan-badge {
        position: absolute;
        top: -12px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--gradient-primary);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 2rem;
        font-size: 0.75rem;
        font-weight: 600;
    }

    .plan-header {
        text-align: center;
        margin-bottom: 1.5rem;
    }

    .plan-header h4 {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .plan-price {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--primary);
        margin-bottom: 0.25rem;
    }

    .plan-price span {
        font-size: 1rem;
        color: var(--gray);
        font-weight: normal;
    }

    .plan-features {
        list-style: none;
        margin-bottom: 2rem;
    }

    .plan-features li {
        margin-bottom: 0.75rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--gray);
    }

    .plan-features li i {
        color: var(--success);
    }

    .plan-features li i.fa-times {
        color: var(--danger);
    }

    .btn-plan {
        width: 100%;
        padding: 1rem;
        background: var(--gradient-primary);
        color: white;
        border: none;
        border-radius: 0.75rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-plan:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }

    .btn-plan.featured {
        animation: pulse 2s infinite;
    }

    .keys-container {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1.5rem;
        padding: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .keys-actions {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .keys-list {
        margin-bottom: 2rem;
    }

    .keys-info {
        display: flex;
        gap: 1rem;
        background: rgba(37, 99, 235, 0.1);
        padding: 1.5rem;
        border-radius: 1rem;
        border: 1px solid rgba(37, 99, 235, 0.2);
    }

    .info-icon {
        font-size: 2rem;
        flex-shrink: 0;
    }

    .info-content h4 {
        font-size: 1.125rem;
        margin-bottom: 0.5rem;
    }

    .info-content p {
        color: var(--gray);
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); }
        70% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); }
        100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
    }

    @media (max-width: 1024px) {
        .account-sidebar {
            position: static;
            width: 100%;
            height: auto;
        }
        
        .account-content {
            margin-left: 0;
        }
        
        .account-container {
            flex-direction: column;
        }
    }
    </style>
</body>
</html>